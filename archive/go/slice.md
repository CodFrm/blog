## GO Slice(åˆ‡ç‰‡)
> æ„Ÿè§‰åˆ‡ç‰‡åªè¦çŸ¥é“åº•å±‚æ˜¯å¼•ç”¨çš„ä¸€ä¸ªæ•°ç»„å¯¹è±¡,å°±æŒºå¥½ç†è§£äº†.è¿™é‡Œå†™ä¸‹ä¸€äº›ç¬”è®°,æ–¹ä¾¿è®°å¿†å’Œä»¥åå†æ¥æŸ¥æ‰¾.

### åˆ‡ç‰‡å’Œæ•°ç»„

åˆ‡ç‰‡ç”±ä¸‰ä¸ªéƒ¨åˆ†ç»„æˆ:æŒ‡é’ˆ(æŒ‡å‘åº•å±‚æ•°ç»„),é•¿åº¦(å½“å‰åˆ‡ç‰‡ä½¿ç”¨çš„é•¿åº¦),å®¹é‡(åˆ‡ç‰‡èƒ½åŒ…å«å¤šå°‘ä¸ªæˆå‘˜)

ç„¶åè¿˜æœ‰ä¸€å¥å’Œæ•°ç»„ç›¸å…³çš„:å½“è°ƒç”¨ä¸€ä¸ªå‡½æ•°çš„æ—¶å€™,å‡½æ•°çš„æ¯ä¸ªè°ƒç”¨å‚æ•°å°†ä¼šè¢«èµ‹å€¼ç»™å‡½æ•°å†…éƒ¨çš„å‚æ•°å˜é‡,æ‰€ä»¥å‡½æ•°å‚æ•°å˜é‡æ¥æ”¶çš„æ˜¯ä¸€ä¸ªå¤åˆ¶çš„å‰¯æœ¬,å¹¶ä¸æ˜¯åŸå§‹è°ƒç”¨çš„å˜é‡ã€‚(æ‰€ä»¥æ•°ç»„ä½œä¸ºå‚æ•°,æ˜¯ä½æ•ˆçš„,è¿˜éœ€è¦è¿›è¡Œä¸€æ¬¡æ•°ç»„çš„æ‹·è´,å¯ä»¥ä½¿ç”¨æ•°ç»„æŒ‡é’ˆ)

ç„¶åå¦‚æœæˆ‘ä»¬æƒ³è¦ä¼ é€’ç»™ä¸€ä¸ªå‡½æ•°ä¸€ä¸ªæ•°ç»„,å‡½æ•°éœ€è¦å¯¹æ•°ç»„è¿›è¡Œä¿®æ”¹,æˆ‘ä»¬å¿…é¡»ä½¿ç”¨æ•°ç»„æŒ‡é’ˆ(ç”¨returnå½“ç„¶ä¹Ÿä¸æ˜¯ä¸è¡Œå•¦ğŸ¤¨)

ä½†æ˜¯åˆ‡ç‰‡å°±ä¸éœ€è¦,æ¥ä¸ªä¾‹å­:
```go
func Test_Func(t *testing.T) {
	var arr = [...]int{1, 2, 3}
	var slice = []int{1, 2, 3}
	ModifyArray(arr)
	ModifySlice(slice)
	t.Logf("%v %v\n", arr, slice)
	assert.NotEqual(t, arr[2], 1)
	assert.Equal(t, slice[2], 1)
}
func ModifyArray(arr [3]int) {
	println(arr)
	arr[2] = 1
}
func ModifySlice(slice []int) {
	println(slice)
	slice[2] = 1
}
```
å‡­å•¥åˆ‡ç‰‡å°±è¡Œ,å¤§å®¶æ˜æ˜éƒ½é•¿å¾—éƒ½å·®ä¸å¤š.
å‰é¢è¯´äº†,åˆ‡ç‰‡æ˜¯ç”±ä¸‰ä¸ªéƒ¨åˆ†ç»„æˆ,ç„¶åæ•°ç»„ä¼ å…¥çš„æ˜¯æ•°ç»„çš„å‰¯æœ¬.å…¶å®æˆ‘è§‰å¾—goé‡Œæ‰€æœ‰çš„ç±»å‹ä¼ å…¥çš„éƒ½æ˜¯å¯¹åº”çš„å‰¯æœ¬,åˆ‡ç‰‡ä¹Ÿæ˜¯,æŒ‡é’ˆä¹Ÿæ˜¯çš„(å€¼ä¼ é€’).

é‚£éƒ½æ˜¯å‰¯æœ¬æ‹·è´,é‚£ä¹ˆå’‹åˆ‡ç‰‡å¯ä»¥ä¿®æ”¹?
`åˆ‡ç‰‡æ˜¯ç”±:æ•°ç»„æŒ‡é’ˆ,é•¿åº¦,å®¹é‡ç»„æˆçš„`,æ¥åˆ’ä¸€ä¸‹é‡ç‚¹.
å‰¯æœ¬ä¼ çš„ä¹Ÿæ˜¯ä¸Šé¢è¿™äº›ä¸œè¥¿.ç„¶åä¿®æ”¹åˆ‡ç‰‡çš„æ—¶å€™å‘¢,å®é™…ä¸Šæ˜¯é€šè¿‡åˆ‡ç‰‡é‡Œé¢çš„æ•°ç»„æŒ‡é’ˆå»ä¿®æ”¹äº†,å¹¶æ²¡æœ‰ä¿®æ”¹åˆ‡ç‰‡çš„å€¼(æ•°ç»„æŒ‡é’ˆ,é•¿åº¦,å®¹é‡).

ç­‰çœ‹å®Œä¸‹é¢å†å†™å¦å¤–ä¸€ä¸ªæƒ…å†µ,åœ¨å‡½æ•°é‡Œé¢,ç»™åˆ‡ç‰‡å¢åŠ æˆå‘˜,ä¼šæ€ä¹ˆæ ·?

### åˆ‡ç‰‡
å®šä¹‰ä¸€ä¸ªæ•°ç»„å’Œå®šä¹‰ä¸€ä¸ªåˆ‡ç‰‡çš„åŒºåˆ«æ˜¯[...]å’Œ\[\](å½“ç„¶è¿˜æœ‰å…¶ä»–çš„å®šä¹‰æ–¹å¼)
```go
func Test_DefineSlice(t *testing.T) {
	var arr = [...]int{1, 2, 3}
	var slice1 = []int{1, 2, 3}
	var slice2 = make([]int, 3)
	var slice3 = arr[:]
	fmt.Printf("arr type=%v len=%d cap=%d\n", reflect.TypeOf(arr).String(), len(arr), cap(arr))
	fmt.Printf("slice1 type=%v len=%d cap=%d\n", reflect.TypeOf(slice1).String(), len(slice1), cap(slice1))
	fmt.Printf("slice2 type=%v len=%d cap=%d\n", reflect.TypeOf(slice2).String(), len(slice2), cap(slice2))
	fmt.Printf("slice3 type=%v len=%d cap=%d\n", reflect.TypeOf(slice3).String(), len(slice3), cap(slice3))
}
//Result:
//arr type=[3]int len=3 cap=3
//slice1 type=[]int len=3 cap=3
//slice2 type=[]int len=3 cap=3
//slice3 type=[]int len=3 cap=3
```

ä¸Šé¢æ–¹æ³•ä¸­çš„åˆ‡ç‰‡æ˜¯ä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªåº•å±‚æ•°ç»„,å¦‚æœåˆ‡ç‰‡ç›´æ¥å¼•ç”¨ä¸€ä¸ªåˆ›å»ºå¥½äº†çš„æ•°ç»„å‘¢?
æˆ‘çš„çŒœæƒ³æ˜¯åœ¨åˆ‡ç‰‡é‡Œé¢ä¿®æ”¹å€¼,åŸæ•°ç»„ä¹Ÿä¼šè·Ÿç€ä¸€èµ·å˜(åˆ‡ç‰‡æŒ‡é’ˆæŒ‡å‘çš„å°±æ˜¯è¿™ä¸€ä¸ªæ•°ç»„)
ç„¶åæˆ‘æƒ³å†éªŒè¯ä¸€ä¸‹,å¦‚æœæˆ‘çš„åˆ‡ç‰‡å†å¢åŠ ä¸€ä¸ªæˆå‘˜(è¶…å‡ºæ•°ç»„é™åˆ¶),é‚£ä¹ˆè¿˜ä¼šå˜åŒ–å—?
æˆ‘çš„çŒœæƒ³æ˜¯ä¼šé‡æ–°åˆ†é…åˆ°å¦å¤–ä¸€ä¸ªæ•°ç»„å»,ç„¶åå¯¼è‡´å¼•ç”¨çš„æ•°ç»„ä¸ä¼šå‘ç”Ÿæ”¹å˜(åˆ‡ç‰‡æŒ‡é’ˆæŒ‡å‘çš„å·²ç»æ˜¯å¦å¤–ä¸€ä¸ªæ•°ç»„äº†)
```go
func Test_Modify(t *testing.T) {
	arr := [...]int{1, 2, 3, 4, 5, 6, 7}
	slice := arr[:]
	slice[4] = 8
	t.Logf("arr[4]=%v,slice[4]=%v\n", arr[4], slice[4])
	assert.Equal(t, slice[4], arr[4])
	slice = append(slice, 9)
	slice[5] = 10
	t.Logf("arr[4]=%v,slice[4]=%v\n", arr[4], slice[4])
	assert.Equal(t, slice[4], arr[4])
	t.Logf("arr[5]=%v,slice[5]=%v\n", arr[5], slice[5])
	assert.NotEqual(t, slice[5], arr[5])
}
```
éªŒè¯é€šè¿‡^_^

å†æ¥è¯•è¯•ä¸¤ä¸ªåˆ‡ç‰‡å…±äº«ä¸€ä¸ªæ•°ç»„
```go
func Test_ModifyTwoSlice(t *testing.T) {
	arr := [...]int{1, 2, 3, 4, 5, 6, 7, 8, 9}
	slice1 := arr[1:5]
	slice2 := arr[3:8]
	slice1[2] = 8
	t.Logf("%v %v %v\n", arr, slice1, slice2)
	assert.Equal(t, slice1[2], slice2[0], arr[3])
}
```
ä¸€æ ·çš„å…¨éƒ¨ä¸€èµ·ä¿®æ”¹æˆåŠŸäº†

### append
ç„¶åæˆ‘ä»¬æ¥çœ‹çœ‹append
```go
func Test_Append(t *testing.T) {
	slice := []int{1, 2, 3}
	println(slice)
	slice = append(slice, 1)
	println(slice)
	slice = append(slice, 1)
	println(slice)
}
// Result:
// slice type=[]int len=3 cap=3
// [3/3]0xc00005e3e0
// slice type=[]int len=4 cap=6
// [4/6]0xc00008c060
// slice type=[]int len=5 cap=6
// [5/6]0xc00008c060
```
å½“å®¹é‡å¤Ÿçš„æ—¶å€™åˆ‡ç‰‡çš„å†…å­˜åœ°å€æ²¡æœ‰å‘ç”Ÿå˜åŒ–,ä¸å¤Ÿçš„æ—¶å€™è¿›è¡Œäº†æ‰©å®¹,åœ°å€æ”¹å˜äº†.

åˆšåˆšå†™çš„æ—¶å€™å‘ç°äº†ä¸€ä¸ªé—®é¢˜,å°±æ˜¯æ¯æ¬¡æ‰©å®¹çš„å¤§å°,æˆ‘å†™äº†ä¸€ä¸ªå¾ªç¯æ¥å±•ç¤º
```go
func Test_Cap(t *testing.T) {
	slice1 := []int{1, 2, 3}
	slice2 := make([]int, 3, 3)
	last := [2]int{0, 0}
	for i := 0; i < 100; i++ {
		slice1 = append(slice1, 1)
		slice2 = append(slice2, 1)
		if last[0] != cap(slice1) {
			println(slice1)
			last[0] = cap(slice1)
		}
		if last[1] != cap(slice2) {
			println(slice2)
			last[1] = cap(slice2)
		}
	}
}
```
å¥½å§,æˆ‘ä»¥ä¸ºæ‰©å®¹çš„å®¹é‡,~~å¦‚æœä¸æ˜¯makeçš„è¯æ˜¯æŒ‰ç…§å‰ä¸€æ¬¡å®¹é‡çš„ä¸¤å€æ¥æ‰©å®¹çš„,æ˜¯makeå°±æ˜¯æ¯æ¬¡å¢åŠ çš„å®¹é‡æ˜¯å›ºå®šçš„,äº‹å®è¯æ˜æˆ‘æƒ³å¤šäº†~~

### End

å†å›åˆ°æœ€å¼€å§‹,åœ¨å‡½æ•°é‡Œé¢,å¢åŠ åˆ‡ç‰‡çš„æˆå‘˜.æˆ‘æƒ³åº”è¯¥æœ‰äº†ç­”æ¡ˆ.
```go
func ModifySlice(slice []int) {
	slice[2] = 1
	slice = append(slice, 4)
	slice[2] = 3
}
```
æˆ‘æŠŠä¹‹å‰çš„`ModifySlice`æ–¹æ³•ä¿®æ”¹äº†ä¸€ä¸‹,ç„¶åæˆå‘˜æ²¡åŠ ,åé¢å†ä¿®æ”¹å›å»ä¸º3ä¹Ÿæ²¡æœ‰å‘ç”Ÿå˜åŒ–äº†.
è¿™æ˜¯å› ä¸ºappendçš„æ—¶å€™å› ä¸ºå®¹é‡ä¸å¤Ÿæ‰©å®¹äº†,å¯¼è‡´åº•å±‚æ•°ç»„æŒ‡é’ˆå‘ç”Ÿäº†æ”¹å˜,ä½†æ˜¯ä¼ è¿›æ¥çš„åˆ‡ç‰‡æ˜¯å¤–é¢åˆ‡ç‰‡çš„å‰¯æœ¬,ä¿®æ”¹è¿™ä¸ªåˆ‡ç‰‡é‡Œé¢çš„æ•°ç»„æŒ‡é’ˆä¸ä¼šå½±å“åˆ°å¤–é¢çš„åˆ‡ç‰‡

#### å¥‡æ·«å·§æŠ€
ä¾‹å¦‚è¿™ä¸ª(goåœ£ç»é‡Œé¢æŠ„çš„233),reverseçš„å‚æ•°æ˜¯åˆ‡ç‰‡,ä½†æ˜¯æˆ‘ä»¬éœ€è¦å¤„ç†çš„æ˜¯ä¸€ä¸ªæ•°ç»„,è¿™é‡Œæˆ‘ä»¬å°±å¯ä»¥ç›´æ¥ç”¨`arr[:]`æŠŠæ•°ç»„è½¬åŒ–ä¸ºåˆ‡ç‰‡è¿›è¡Œå¤„ç†
```go
func Test_Demo(t *testing.T) {
	arr := [...]int{1, 2, 3, 4}
	reverse(arr[:])
	t.Logf("%v\n", arr)
}
func reverse(s []int) {
	for i, j := 0, len(s)-1; i < j; i, j = i+1, j-1 {
		s[i], s[j] = s[j], s[i]
	}
}
```


> æš‚æ—¶åªæƒ³åˆ°è¿™äº›,å†æœ‰çš„è¯,ä»¥åç»§ç»­è¡¥.å¦‚æœ‰é”™è¯¯å¸Œæœ›æŒ‡æ•™.